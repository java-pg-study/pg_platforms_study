## 책임 할당하기

- GRASP 패턴은 책임 할당의 어려움을 해결하기 위한 답을 제시

### 1. 책임 주도 설계를 향해

#### 데이터보다 행동을 먼저 결정하라

- 객체에게 중요한 것은 데이터가 아니라 외부에 제공하는 행동 -> 객체의 책임을 의미

- 객체는 협력에 참여하기 위해 존재하며 협력 안에서 수행하는 책임이 객체의 존재가치를 증명

- 책임 중심의 설계
    
    - 이 객체가 수행해야 하는 책임은 무엇인가?

    - 이 책임을 수행하는 데 필요한 데이터는 무엇인가?

    - 책임 중심의 설계에서는 객체의 행동, 즉 책임을 먼저 결정한 후에 객체의 상태를 결정

#### 협력이라는 문맥 안에서 책임을 결정하라

    - 객체에게 할당된 책임의 품질은 협력에 적합한 정도로 결정

    - 객체에게 할당된 책임이 협력에 어울리지 않는다면 그 책임은 나쁜 것

    - 책임은 객체의 입장이 아니라 객체가 참여하는 협력에 적합해야 한다

    - 협력에 적합한 책임을 수확하기 위해서는 객체를 결정한 후에 메시지를 선택하는 것이 아니라 메시지를 결정한 후에 객체를 선택

    - 메시지가 클라이언트의 의도를 표현한다는 사실에 주목

    - 객체를 결정하기 전에 객체가 수신할 메시지를 먼저 결정하다는 점을 주목

    - 메시지를 먼저 결정하기 때문에 메시지 송신자는 메시지 수신자에 대한 어떠한 가정도 할 수 없다 -> 메시지 전송자의 관점에서 메시지 수신자가 깔끔하게 캡슐화되는 것

### 2. 책임 할당을 위한 GRASP 패턴

- GRASP 패턴이란 "General Responsibility Assignment Software Pattern(일반적인 책임 할당을 위한 소프트웨어 패턴)"의 약자로 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리

#### 도메인 개념에서 출발하기

- 설계를 시작하기 전에 도메인에 대한 개략적인 모습을 그려 보는 것이 유용

- 도메인 안에는 무수히 많은 개념들이 존재하며 이 도메인 개념들을 책임 할당의 대상으로 사용하면 코드에 도메인의 모습을 투영하기 좀 더 수월해짐

- 어떤 책임을 할당해야 할 때 가장 먼저 고민해야 하는 유력한 후보는 바로 도메인 개념

#### 정보 전문가에게 책임을 할당하라

- 책임 주도 설계 방식의 첫 단계는 애플리케이션이 제공해야 하는 기능을 애플리케이션의 책임으로 생각하는 것

- 이 책임을 애플리케이션에 대해 전송된 메시지로 간주하고 이 메시지를 책임질 첫 번째 객체를 선택하는 것으로 설계를 시작

- 메시지를 전송할 객체는 무엇을 원하는가?

- 메시지를 수신할 적합한 객체는 누구인가?

- 객체는 자신의 상태를 스스로 처리하는 자율적인 존재여야 함 -> 객체의 책임과 책임을 수행하는 데 필요한 상태는 동일한 객체 안에 존재

- 객체에게 책임을 할당하는 첫 번째 원칙은 책임을 수행할 정보를 알고 있는 객체에게 책임을 할당 -> INFORMATION EXPERT(정보 전문가) 패턴

- INFORMATION EXPERT 패턴은 객체가 자신이 소유하고 있는 정보와 관련된 작업을 수행한다는 일반적인 직관을 표현한 것

- 여기서 이야기하는 정보는 데이터와 다르다는 사실에 주의

- 책임을 수행하는 개체가 정보를 '알고'있다고 해서 그 정보를 '저장'하고 있을 필요는 없다

- 객체는 해당 정보를 제공할 수 있는 다른 객체를 알고 있거나 필요한 정보를 계산해서 제공할 수도 있다

- 개략적인 수준에서 객체들의 책임을 결정하는 단계이기 때문에 너무 세세한 부분까지 고민할 필요는 없다

- INFORMATION EXPERT 패턴은 객체란 상태와 행동을 함께 가지는 단위라는 객체지향의 가장 기본적인 원리를 책임 할당의 관점에서 표현

- INFORMATION EXPERT 패턴을 따르는 것만으로도 자율성이 높은 객체들로 구성된 협력 공동체를 구축할 가능성이 높아지는 것

#### 높은 응집도와 낮은 결합도

- 높은 응집도와 낮은 결합도는 객체에 책임을 할당할 때 항상 고려해야 하는 기본 원리

- LOW COUPLING(낮은 결합도)는 모든 설계 결정에서 염두에 둬야 하는 원리 -> 설계 결정을 평가할 때 적용할 수 있는 평가원리

- 현재의 책임 할당을 검토하거나 여러 설계 대안들이 있을 때 낮은 결합도를 유지할 수 있는 설계를 선택

- HIGHT COHESION 패턴

#### 창조자에게 객체 생성 책임을 할당하라

- CREATOR(창조자) 패턴은 객체를 생성할 책임을 어떤 객체에게 할당할지에 대한 지침을 제공

    - B가 A 객체를 포함하거나 참조한다

    - B가 A 객체를 기록한다

    - B가 A 객체를 긴밀하게 사용한다

    - B가 A 객체를 초기화하는 데 필요한 데이터를 가지고 있다