# 객체지향 사실과 오해 04

- 인간의 행동을 결정하는것은 어떤 상황에 처해있는지이다. 즉 개인이 처해있는 정황 또는 문맥이 인간의 행동 방식을 결정한다.
- 객체의 세계에서도 협력이라는 문맥이 객체의 행동 방식을 결정한다.
- 개별적인 객체의 행동이나 상태가 아닌 객체들 간의 협력에 집중해야한다.

### 협력

- 협력은 요청을 할 때 시작된다.
- 요청을 받으면 필요 지식 서비스를 제공함으로 응답한다.
- 요청과 응답은 협력에 참여하는 객체가 수행할 책임을 정의한다.

### 책임

- 객체지향에서의 세계에서는 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우 해당 객체가 책임을 가진다고 말한다.
- 책임은 하는것 과 아는 것 두 가지 범주로 자세히 분류하고 있다.
- 하는 것 (doing)
    
     - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
    
     - 다른 객체의 행동을 시작시키는 것
    
    - 다른 객체의 활동을 제어하고 조절하는 것
- 아는 것
- 개인적인 정보에 관해 아는 것
- 관련된 객체에 관해 아는 것
- 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
- 책임은 객체 외부에 제공해 줄 수 있는 정보와 외부에 제공해 줄 수 있는 서비스의 목록
- 따라서 책임은 공용 인터페이스를 구성한다.

### 책임과 메시지

- 메시지 전송 : 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것
- 협력은 메시지로 이루어짐, 객체가 다른 객체로 접근할 수 있는 유일한 방법
- 책임과 메시지의 수준이 같지 않다.

### 역할

- 책의 예시에서는 서로 다른 세개의 재판 과정, 즉 세 개의 협력이 주어져 있다.
- 협력에 참여하는 등장인물을 제외하고 나머지 과정이 비슷해 하나의 협력으로 다루고 싶다.
- 역할을 사용하면 공통점을 가진 여러 협력을 하나의 협력으로 추상화 할 수 있다.
- 다양한 객체들의 협력에 참여할 수 있기 떄문에 협력이 좀 더 유연해지고 다양한 객체들의 동일한 협력에 참여할 수 있어 재사용성이 높아짐
- 즉 역할은 객체지향 설계의 **단순성**, **유연성, 재사용성을** 뒷받침 한다.
- 역할의 가장 큰 가치는 하나의 협력 안에 여러 종류의 객체가 참여할 수 있게 하여 협력을 추상화할 수 있다.

대체 가능성

- 역할은 협력 안에서 구체적인 객체로 대체될 수 있는 추상적인 협력자
- 객체가 역할을 대체하기 위해서는 행동이 호환돼야한다.
- 역할의 대체 가능성은 행위 호환성을 위미하고 행위 호환성은 동일한 책임의 수행을 의미한다.
- 객체가 주어진 책임 이외에 다른 책임도 수행 가능 (왕이자 판사)

### 객체의 모양을 결정하는 협력

- 객체는 시스템에 필요한 데이터를 저장하는 것이 아니다.
- 객체는 행위를 수행하며 협력에 참여하기 위해 존재한다. → 객체의 행동 즉 책임이 중요
- 객체지향은 정적인 클래스가 아닌 협력에 참여하는 동적인 객체가 중요하다. 클래스는 단지 구현 메커니즘
- 객체에게 책임을 할당하면 책임은 객체가 외부에게 제공하게 될 “행동”이 된다.
- 협력을 구성하는데 필요한 일련의 책임을 먼저 고안하고 나면 그 책임을 수행하는 데 필요한 객체를 선택하게 된다.
- 객체지향 시스템에서 가장 중요한 것은 충분히 자율적인 동시에 충분히 협력적인 객체를 창조하는 것이다. → 객체를 충분히 렵력적으로 만든 후에 협력이라는 문맥 안에서 객체를 충분히 자율적으로 만든다.

### 객체지향 설계 기법

- **책임 주도 설계 :** 
책임 주도 설계는 시스템의 책임을 객체의 책임으로 변환
각 객체들이 책임을 수행하는 중 필요한 정보나 서비스를 제공해 줄 협력자를 찾아 해당 협력자에게 책임을 할당하는 순차적 방식으로 객체들의 협력 공동체 구축.
- 책임 주도 설계는 개별적인 객체의 상태가 아닌 객체의 책임과 상호작용에 집중
1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다
2. 시스템의 책임을 더 작은 책임으로 분할한다
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다
4. 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다
5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다

**디자인 패턴 :** 

- 책임 주도 설꼐의 결과를 표현한다.
- 전문가들이 반복적으로 사용하는 해결 방법을 정의해 놓은 설계 템플릿 모음
- 패턴은 적용할 수 있는 상황과 없는 상황을 설명하고 어떤 설계가 왜 효과적인지도 설명한다.

**테스트 주도 개발 :** 

- 실패하는 테스트를 작성하고, 테스트를 통과하는 가장 간단한 코드를 작성한 후, 리팩터링을 통해 중복을 제거 → 클린 코드
- 테스트 주도 개발이 응집도가 높고 결합도가 낮은 클래스로 구성된 시스템의 개발 최상의 프랙티스
- 테스트 주도 개발은 책임 주도 설꼐의 개본 개념과 다양한 원칙과 프랙티스, 패턴을 종합적으로 이해하고, 좋은 설계에 대한 감각과 경험을 길러야만 적용할 수 있다.
역할,책임,협력에 집중하고 객체지향의 원칙을 적용하려는 고민과 노력을 먼저